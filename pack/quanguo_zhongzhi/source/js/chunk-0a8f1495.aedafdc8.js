(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a8f1495"],{"2d07":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("div",{staticClass:"header"},[a("div",{staticClass:"appName header-el",on:{click:t.handleHome}},[t._v(t._s(t.APP_NAME))]),a("div",{staticClass:"right-tu"},[a("div",{staticClass:"identity"},[a("p",[t._v("\n          "+t._s(0==t.userType?"学校管理员":1==t.userType?"教职工":2==t.userType?"学生":3==t.userType?"企业":4==t.userType?"家长":"未识别")+"\n        ")]),a("p",[t._v(t._s(t.userName?t.userName:"未识别"))])]),a("el-dropdown",{on:{"visible-change":function(e){t.arrowDown=!t.arrowDown},command:t.handleCommand}},[a("el-row",[a("img",{staticClass:"headers",attrs:{src:i("a729")}}),a("span",[a("i",{staticClass:"el-icon-caret-bottom",class:{rota:t.arrowDown}})])]),a("el-dropdown-menu",{attrs:{slot:"dropdown","hide-on-click":!0},slot:"dropdown"},[a("el-dropdown-item",[a("p",{staticClass:"drop_span"},[t._v("\n              用户：\n              "),a("span",[t._v(t._s(t.userName?t.userName:"未识别"))])])]),a("el-dropdown-item",[a("p",{staticClass:"drop_span"},[t._v("\n              身份名：\n              "),a("span",[t._v("\n                "+t._s(0==t.userType?"学校管理员":1==t.userType?"教职工":2==t.userType?"学生":3==t.userType?"企业":4==t.userType?"家长":"未识别")+"\n              ")])])]),a("el-dropdown-item",{attrs:{divided:"",command:"修改密码"}},[t._v("修改密码")]),a("el-dropdown-item",{attrs:{command:"退出登录"}},[t._v("退出登录")])],1)],1)],1),a("div",{staticClass:"message"},[t.tableData.length?a("div",{staticClass:"icon",on:{click:function(e){t.dialogVisible1=!0}}},[a("el-badge",{attrs:{value:t.totalValue}},[a("svg",{staticClass:"icon",attrs:{t:"1565768137371",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"12818",width:"16",height:"16"}},[a("path",{attrs:{d:"M526.432 924.064c-20.96 0-44.16-12.576-68.96-37.344L274.752 704 192 704c-52.928 0-96-43.072-96-96l0-192c0-52.928 43.072-96 96-96l82.752 0 182.624-182.624c24.576-24.576 47.744-37.024 68.864-37.024C549.184 100.352 576 116 576 160l0 704C576 908.352 549.28 924.064 526.432 924.064zM192 384c-17.632 0-32 14.368-32 32l0 192c0 17.664 14.368 32 32 32l96 0c8.48 0 16.64 3.36 22.624 9.376l192.064 192.096c3.392 3.36 6.496 6.208 9.312 8.576L512 174.016c-2.784 2.336-5.952 5.184-9.376 8.608l-192 192C304.64 380.64 296.48 384 288 384L192 384zM687.584 730.368c-6.464 0-12.992-1.952-18.656-6.016-14.336-10.304-17.632-30.304-7.328-44.672l12.672-17.344C707.392 617.44 736 578.624 736 512c0-69.024-25.344-102.528-57.44-144.928-5.664-7.456-11.328-15.008-16.928-22.784-10.304-14.336-7.04-34.336 7.328-44.672 14.368-10.368 34.336-7.04 44.672 7.328 5.248 7.328 10.656 14.464 15.968 21.504C764.224 374.208 800 421.504 800 512c0 87.648-39.392 141.12-74.144 188.32l-12.224 16.736C707.36 725.76 697.568 730.368 687.584 730.368zM796.448 839.008c-7.488 0-15.04-2.624-21.088-7.936-13.28-11.648-14.624-31.872-2.976-45.152C836.608 712.672 896 628.864 896 512c0-116.864-59.392-200.704-123.616-273.888-11.648-13.312-10.304-33.504 2.976-45.184 13.216-11.648 33.44-10.336 45.152 2.944C889.472 274.56 960 373.6 960 512s-70.528 237.472-139.488 316.096C814.144 835.328 805.312 839.008 796.448 839.008z","p-id":"12819",fill:"#e6e6e6"}})])])],1):t._e(),a("div",{staticClass:"text"},[a("ul",{ref:"container",staticClass:"container",style:{marginTop:t.marginTop}},t._l(t.tableData,function(e,i){return a("li",{key:i,on:{click:function(i){return t.handleClick(e)}}},[t._v(t._s(t.judgeLength(e.ggbt)))])}),0)])]),a("el-dialog",{attrs:{title:"查看消息列表",visible:t.dialogVisible1,width:"1000px",center:""},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-table",{attrs:{data:t.tableData,stripe:"",border:"",fit:"","max-height":"500"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"ggbt",label:"公告标题",align:"center"}}),a("el-table-column",{attrs:{prop:"gjz",label:"关键字",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("table-icon",{attrs:{icon:"查看"},on:{click:function(i){return t.getDetail(e.row)}}})]}}])})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",size:"medium"},on:{click:function(e){t.dialogVisible1=!1}}},[t._v("关闭")])],1)],1),a("el-dialog",{staticClass:"detail_info",attrs:{title:"查看消息详情",visible:t.dialogVisible2,width:"500px",center:""},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("el-form",{attrs:{model:t.rowDetail,"label-width":"100px"}},[a("el-row",[a("el-form-item",{attrs:{label:"公告标题"}},[a("span",[t._v(t._s(t.rowDetail.ggbt))])])],1),a("el-row",[a("el-form-item",{attrs:{label:"关键字"}},[a("span",[t._v(t._s(t.rowDetail.gjz))])])],1),a("el-row",[a("el-form-item",{attrs:{label:"公告内容"}},[a("span",[t._v(t._s(t.rowDetail.ggnr))])])],1),a("el-row",[a("el-form-item",{attrs:{label:"公告附件"}},[a("el-upload",{attrs:{action:"http://localhost:8089/cube-api/api/tour/sysAd/uploadFile","file-list":t.rowDetail.fileList,disabled:!0,"on-preview":t.handlePreview}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",size:"medium"},on:{click:function(e){t.dialogVisible2=!1}}},[t._v("关闭")])],1)],1)],1),a("div",{staticClass:"middle"},[a("router-view")],1)])},s=[],o=i("cebc"),l=(i("6762"),i("2fdb"),i("ac6a"),i("7f7f"),i("775b")),n={data:function(){return{sortColumn:[],sortObj:{},tableData:[],dialogVisible1:!1,dialogVisible2:!1,rowDetail:{},marginTop:"0",APP_NAME:APP_NAME,titleLengthLimit:20,totalValue:"",arrowDown:!1,userName:localStorage.name,userType:localStorage.userType,activeItem:0}},created:function(){this.getLoginInfo(),this.getData()},mounted:function(){if(!this.$store.state.hasSeted){var t=sessionStorage.getItem("theme");this.$store.dispatch("changeTheme",t||"defaultStyle")}this.activeItem=this.tableData.length,this.initScroll()},methods:{handlePreview:function(t){window.open(t.url)},getDetail:function(t){this.rowDetail=t,this.dialogVisible2=!0},getData:function(){var t=this;this.$HTTP.api({url:"/api/tour/sysAd/homeSysAdList",successCallback:function(e){"0"==e.code?(e.data.forEach(function(t){var e=[];t.fbfw&&(t.fbfw.forEach(function(i,a){e.push({name:t.fileName||"上传附件"+(a+1),url:l["b"]+"/common/fileDownloadByFileId?fileId="+i})}),t.fileList=e)}),t.tableData=e.data):console.log(e.msg)}})},handleSortChange:function(t){t.column;var e=t.prop,i=(t.order,this.sortColumn.indexOf(e));if(-1===i)return this.sortColumn.push(e),this.$set(this.sortObj,e,!0),void this.queryTable();this.sortObj[e]?this.$set(this.sortObj,e,!1):(this.sortColumn.splice(i,1),this.$delete(this.sortObj,e)),this.queryTable()},handleTheadAddClass:function(t){t.row;var e=t.column;t.rowIndex,t.columnIndex;if(this.sortColumn.includes(e.property))return this.sortObj[e.property]?"active-ascending":"active-descending"},handleClick:function(t){this.dialogVisible2=!0,this.rowDetail=t},getLoginInfo:function(){var t=this;this.$HTTP.api({root:APP_HTTP_ROOT_ADMIN,url:"/sys/user/info",method:"GET",successCallback:function(e){if(0==e.code){var i=e.user;t.userName=i.realName,t.$store.commit("UPDATE_VALUE",{key:"userInfo",value:Object(o["a"])({},i)}),t.userType=i.status,sessionStorage.setItem("userId",i.userId),t.$HTTP.api({url:"/api/tour/schoolInfo/xxxl",method:"post",timeout:15e3,params:{userId:i.userId},successCallback:function(e){0===e.code?t.$store.commit("UPDATE_VALUE",{key:"schoolInfo",value:e.data}):t.$message.error(e.msg+"请重新登录")}})}else t.$message.error(e.msg)}})},initScroll:function(){var t=this;this.activeItem+1<this.tableData.length?this.activeItem++:this.activeItem=0,this.marginTop=-20*this.activeItem+"px",setTimeout(function(){t.initScroll()},5e3)},judgeLength:function(t){return t?t.length>this.titleLengthLimit?t.substring(0,this.titleLengthLimit)+"...":t:""},back:function(){sessionStorage.clear(),this.$router.push({path:"/login"})},handleHome:function(){},handleCommand:function(t){switch(t){case"退出登录":this.back();break;case"修改密码":this.$router.push({path:"/head/page/relf/changePwd"});break;case"个人信息":this.$router.push({path:"/head/page/relf/info"});break;default:break}}}},r=n,c=(i("6813"),i("68d8"),i("2877")),d=Object(c["a"])(r,a,s,!1,null,"11232482",null);e["default"]=d.exports},"2da9":function(t,e,i){},6813:function(t,e,i){"use strict";var a=i("c30f"),s=i.n(a);s.a},"68d8":function(t,e,i){"use strict";var a=i("2da9"),s=i.n(a);s.a},a729:function(t,e,i){t.exports=i.p+"source/img/header1.db3cac12.png"},c30f:function(t,e,i){}}]);